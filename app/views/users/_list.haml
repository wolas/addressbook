- show_company ||= false

%table.users_table
  %tr
    %th= I18n.t('txt.users.attributes.name')
    %th= I18n.t('txt.users.attributes.phone')
    %th= I18n.t('txt.users.attributes.mobile')
    %th= I18n.t('txt.users.attributes.email')
    %th= I18n.t('txt.users.attributes.skype')
    - if show_company
      %th= I18n.t('txt.users.attributes.company')

  - users.each_with_index do |user, index|
    %tr{:class => index.odd? ? 'even_row' : 'odd_row'}

      %td.name_cell
        %span
          = image_tag 'face.png', :width => '35px', :style => 'vertical-align: middle;'
          = link_to h(user.full_name), user

      %td= user.phone

      %td= user.mobile

      %td= mail_to user.email

      %td= link_to image_tag("http://mystatus.skype.com/smallclassic/#{user.skype}", :class=>"skype", :alt=>"My status"), "skype:#{user.skype}?chat" if user.skype?

      - if show_company
        %td= link_to user.company.name, user.company if user.company

      - if admin?
        %td
          = link_to I18n.t('txt.edit'), edit_user_path(user)
          |
          = link_to I18n.t('txt.destroy'), user, :method => :delete, :confirm => "#{I18n.t('txt.confirm_delete')} all details for '#{user.full_name}'?"
